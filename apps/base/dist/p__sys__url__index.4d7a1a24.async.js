"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{5842:function(ie,R,e){var P=e(86378),v=e.n(P),T=e(58357),t=e.n(T),B=e(71977),i=e.n(B),C=e(28488),f=e.n(C),_=e(50959),j=e(15663),x=e(26161),Z=e(53801),I=e(11527),K=["propCode","onChange"],O=function(s){var X=s.propCode,k=s.onChange,F=f()(s,K),G=(0,Z.Z)(j.fQ,{manual:!0,cacheKey:"STATIC_".concat(X),staleTime:3e5}),$=G.runAsync,N=function(a){k&&k(a.target.value)};return(0,I.jsx)(x.Z,v()(v()({request:i()(t()().mark(function Q(){var a;return t()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,$({query:{propCode:X,state:1},pageNo:1,pageSize:999});case 2:return a=g.sent,g.abrupt("return",a.data.result.map(function(se){return{label:se.valueName,value:+se.valueCode}}));case 4:case"end":return g.stop()}},Q)}))},F),{},{radioProps:v()({onChange:N},F==null?void 0:F.radioProps)}))};R.Z=O},26253:function(ie,R,e){var P=e(86378),v=e.n(P),T=e(30577),t=e.n(T),B=e(28488),i=e.n(B),C=e(12632),f=e(50959),_=e(53690),j=e(11527),x=["auth","children"],Z=function(K){var O=K.auth,m=K.children,s=i()(K,x),X=(0,_.useModel)("@@initialState"),k=X.initialState,F=k,G=F.currentUser,$=(0,f.useState)(function(){var a;return O!==void 0?!!(G!=null&&G.authButton&&(a=G.authButton)!==null&&a!==void 0&&a.has(O)):!0}),N=t()($,1),Q=N[0];return(0,j.jsx)(j.Fragment,{children:Q?(0,j.jsx)(C.ZP,v()(v()({},s),{},{children:m})):(0,j.jsx)(j.Fragment,{})})};R.Z=Z},4643:function(ie,R,e){var P=e(58357),v=e.n(P),T=e(86378),t=e.n(T),B=e(71977),i=e.n(B),C=e(30577),f=e.n(C),_=e(28488),j=e.n(_),x=e(40039),Z=e(50959),I=e(53690),K=e(93789),O=e(13655),m=e(5061),s=e(11527),X=["auth","table"],k=K.Z.Text,F=function($){var N,Q=$.auth,a=$.table,ne=j()($,X),g=(0,I.useModel)("@@initialState"),se=g.initialState,ce=se,te=ce.currentUser,Ee=(0,Z.useState)(function(){var u;return Q!==void 0?!!(te!=null&&te.authButton&&(u=te.authButton)!==null&&u!==void 0&&u.has(Q)):!0}),Ce=f()(Ee,1),q=Ce[0];return(0,s.jsx)(s.Fragment,{children:q?(0,s.jsx)(x.Z,t()(t()({tableLayout:"auto",size:"middle",rowKey:(a==null?void 0:a.rowKey)||ne.rowKey,request:function(){var u=i()(v()().mark(function oe(y){var le,ee,r,ue,me,ve,pe,he,fe;return v()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return le=y.pageSize,ee=y.current,r=y.formValues,ue=t()(t()({},r),a==null?void 0:a.requestParam),a!=null&&a.onSearchBefore&&(ue=a.onSearchBefore(ue)),w.next=5,a==null?void 0:a.request({pageNo:ee,pageSize:le,query:ue});case 5:if(me=w.sent,ve=me.success,pe=me.data,he=pe.result,fe=pe.totalNum,!(a!=null&&a.onSearchAfter)){w.next=12;break}return w.abrupt("return",a==null?void 0:a.onSearchAfter({total:fe,success:ve,data:he}));case 12:return w.abrupt("return",{total:fe,success:ve,data:he});case 13:case"end":return w.stop()}},oe)}));return function(oe){return u.apply(this,arguments)}}()},ne),{},{columns:(N=ne.columns)===null||N===void 0?void 0:N.map(function(u){return u.ellipsis?t()(t()({},u),{},{render:function(y,le,ee){return u.render&&u.render(y,le,ee),(0,s.jsx)(k,{style:{width:u.width||200},ellipsis:{tooltip:{title:y}},children:u!=null&&u.render?u.render(y,le,ee):y})}}):u})})):(0,s.jsx)(O.ZP,{renderEmpty:function(){return(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)(m.Z,{style:{fontSize:26,margin:"16px 0"}}),(0,s.jsx)("p",{children:"\u6682\u65E0\u6743\u9650"})]})},children:(0,s.jsx)(x.Z,t()(t()({tableLayout:"auto",size:"middle"},ne),{},{formItems:[],request:i()(v()().mark(function u(){return v()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",{total:0,success:!1,data:[]});case 1:case"end":return y.stop()}},u)})),toolbarActionConfig:{showReload:!1,showColumnSetting:!1,showDensity:!1,showFullscreen:!1}}))})})};R.Z=F},65571:function(ie,R,e){var P=e(86378),v=e.n(P),T=e(28488),t=e.n(T),B=e(50959),i=e(79804),C=e(11527),f=["children"],_=function(x){var Z=x.children,I=t()(x,f);return(0,C.jsx)(i.Z,v()(v()({style:{height:"calc(100vh - 160px)",overflowY:"auto"}},I),{},{children:Z}))};R.Z=_},70879:function(ie,R,e){e.r(R),e.d(R,{default:function(){return ze}});var P=e(65571),v=e(88536),T=e(86378),t=e.n(T),B=e(30577),i=e.n(B),C=e(26253),f=e(4643),_=e(35396),j=e(78177),x=e(93789),Z=e(32499),I=e(7318),K=e(80650),O=e(80361),m=e(50959),s=e(19708),X=function(n){return(0,s.v_)("/service-sysmgr/auth/UrlController/pageUrlGroup",n)},k=function(n){return(0,s.v_)("/service-sysmgr/auth/UrlController/pageUrl",n)},F=function(n){return(0,s.U2)("/service-sysmgr/auth/UrlController/getCheckedUrlGroupUrl",n)},G=function(n){return(0,s.v_)("/service-sysmgr/auth/UrlController/doUrlGroupRelaUrl",n)},$=function(n){return n.groupId?(0,s.v_)("/service-sysmgr/auth/UrlController/updateUrlGroup",n):(0,s.v_)("/service-sysmgr/auth/UrlController/createUrlGroup",n)},N=function(n){return n.urlId?(0,s.v_)("/service-sysmgr/auth/UrlController/updateUrl",n):(0,s.v_)("/service-sysmgr/auth/UrlController/createUrl",n)},Q=e(58357),a=e.n(Q),ne=e(71977),g=e.n(ne),se=e(28488),ce=e.n(se),te=e(5842),Ee=e(53801),Ce=e(30020),q=e(54098),u=e(43735),oe=e(52163),y=e(42383),le=e(83228),ee=e(73138),r=e(11527),ue=["data","onChange","open"],me=function(n){var o=n.data,re=n.onChange,p=n.open,V=ce()(n,ue),A=u.Z.useForm(),Y=i()(A,1),b=Y[0],H=(0,Ee.Z)(N,{manual:!0,onSuccess:function(h){h.success&&re()}}),M=H.runAsync;return(0,m.useEffect)(function(){p&&o&&b.setFieldsValue(t()(t()({},o),{},{requestType:"".concat(o.requestType)}))},[p]),(0,r.jsx)(oe.Z,t()(t()({isDraggable:!0,open:p,form:b,width:800,labelCol:{span:6},wrapperCol:{span:16},title:o?"\u4FEE\u6539\u4FE1\u606F":"\u65B0\u5EFAURL",onFinish:function(){var D=g()(a()().mark(function h(E){var d,L;return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,M(t()(t()({},o),E));case 2:return d=l.sent,L=d.success,l.abrupt("return",L);case 5:case"end":return l.stop()}},h)}));return function(h){return D.apply(this,arguments)}}(),modalProps:{afterClose:function(){return b.resetFields()},wrapClassName:"modal_wrap_render"},initialValues:{state:1,urlType:1,requestType:0}},V),{},{children:(0,r.jsxs)(Ce.Z,{children:[(0,r.jsx)(q.Z,{span:12,children:(0,r.jsx)(O.Z,{name:"urlName",required:!0,label:"URL\u540D\u79F0",tooltip:"\u8DEF\u7531\u540D\u79F0 - URL\u529F\u80FD\u540D",placeholder:"\u4F8B\uFF1A\u83DC\u5355\u7BA1\u7406-\u65B0\u589E\u83DC\u5355",rules:[{required:!0,message:"\u8BF7\u8F93\u5165URL\u540D\u79F0"},{message:"URL\u540D\u79F0\u683C\u5F0F\u9519\u8BEF",pattern:RegExp(/-/)}]})}),(0,r.jsx)(q.Z,{span:12,children:(0,r.jsx)(y.Z,{name:"urlType",required:!0,label:"URL\u7C7B\u578B",options:[{label:"\u666E\u901Aurl",value:1}]})}),(0,r.jsx)(q.Z,{span:12,children:(0,r.jsx)(te.Z,{label:"\u6743\u9650\u72B6\u6001",required:!0,name:"state",propCode:"status"})}),(0,r.jsx)(q.Z,{span:12,children:(0,r.jsx)(le.Z,{name:"requestType",label:"\u63A5\u53E3\u65B9\u6CD5",required:!0,options:[{label:"get",value:"0"},{label:"post",value:"1"},{label:"put",value:"2"},{label:"patch",value:"3"},{label:"delete",value:"4"}]})}),(0,r.jsx)(q.Z,{span:24,children:(0,r.jsx)(O.Z,{labelCol:{span:3},wrapperCol:{span:20},required:!0,name:"urlPath",label:"URL\u5730\u5740"})}),(0,r.jsx)(q.Z,{span:24,children:(0,r.jsx)(ee.Z,{labelCol:{span:3},wrapperCol:{span:20},name:"urlDesc",label:"URL\u8BF4\u660E"})})]})}))},ve=me,pe=x.Z.Paragraph,he=function(){var n=(0,m.useRef)(),o=(0,m.useRef)(),re=(0,m.useState)(!1),p=i()(re,2),V=p[0],A=p[1],Y=(0,m.useState)(),b=i()(Y,2),H=b[0],M=b[1],D=[{title:"URL\u540D",dataIndex:"urlName"},{title:"URL\u5730\u5740",dataIndex:"urlPath",render:function(d){return(0,r.jsx)(pe,{copyable:!0,style:{marginBottom:0},children:d})}},{title:"URL\u7C7B\u578B",dataIndex:"requestType",align:"center",render:function(d){return d===0?(0,r.jsx)(Z.Z,{color:"success",children:"GET"}):(0,r.jsx)(Z.Z,{color:"orange",children:"POST"})}},{title:"\u72B6\u6001",dataIndex:"state",align:"center",render:function(d){return d===1?(0,r.jsx)(I.Z,{status:"success",text:"\u542F\u7528"}):(0,r.jsx)(I.Z,{text:"\u7981\u7528"})}},{title:"URL\u8BF4\u660E",dataIndex:"urlDesc",width:200},{key:"actions",title:"\u64CD\u4F5C",align:"center",fixed:"right",render:function(d,L){return(0,r.jsx)(K.Z,{className:"action_bar",children:(0,r.jsx)(C.Z,{type:"link",icon:(0,r.jsx)(_.Z,{}),auth:"sys:url:update",onClick:function(){M(t()({},L)),A(!0)},children:"\u4FEE\u6539"})})}}],h=[(0,r.jsx)(O.Z,{name:"urlName",label:"URL\u540D\u79F0"},"1"),(0,r.jsx)(O.Z,{name:"urlPath",label:"URL\u5730\u5740"},"2")];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{rowKey:"urlId",auth:"sys:url:list",scroll:{x:1200},tableRef:o,formRef:n,columns:D,formItems:h,size:"small",toolbarLeft:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(C.Z,{auth:"sys:url:create",type:"primary",onClick:function(){M(void 0),A(!0)},icon:(0,r.jsx)(j.Z,{}),children:"\u65B0\u589EURL"})}),table:{request:k}}),(0,r.jsx)(ve,{open:V,onOpenChange:A,data:H,onChange:function(){var d;(d=o.current)===null||d===void 0||d.onReload()}})]})},fe=he,De=e(63625),w=e(90967),Re=e.n(w),je=e(53690),Oe=e(24862),Ae=e(85900),Me=e(44147),Pe=e(88880),xe=["record","onReload","open"],Ie=[{dataIndex:"urlName",title:"URL\u540D\u79F0"},{dataIndex:"urlPath",title:"URL\u5730\u5740",ellipsis:!0}],Se=[{dataIndex:"urlName",title:"URL\u540D\u79F0"},{dataIndex:"urlPath",title:"URL\u5730\u5740",ellipsis:!0}],Le=function(n){var o=n.record,re=n.onReload,p=n.open,V=ce()(n,xe),A=u.Z.useForm(),Y=i()(A,1),b=Y[0],H=(0,m.useState)([]),M=i()(H,2),D=M[0],h=M[1],E=(0,je.useRequest)(F,{manual:!0,formatResult:function(c){var W=c.data,J=[];return W.forEach(function(U){U.key=U.urlId.toString(),U.checked&&J.push(U.urlId.toString())}),h(J),W}}),d=E.run,L=E.data,ae=E.loading;(0,m.useEffect)(function(){p&&o&&d({groupId:o.groupId})},[p]);var l=function(c){h(Re()(c))};return(0,r.jsx)(Me.Z,t()(t()({open:p,form:b,labelCol:{span:4},width:"100%",title:"".concat(o==null?void 0:o.groupName,"\u5173\u8054URL"),onFinish:g()(a()().mark(function z(){var c,W;return a()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,G({groupId:o==null?void 0:o.groupId,urlIds:D});case 2:return c=U.sent,W=c.success,U.abrupt("return",W);case 5:case"end":return U.stop()}},z)})),modalProps:{afterClose:function(){return b.resetFields()}}},V),{},{children:(0,r.jsx)(Oe.Z,{titles:["URL\u5217\u8868","\u5DF2\u5173\u8054"],dataSource:L,showSearch:!0,targetKeys:D,rowKey:function(c){return c.urlId.toString()},onChange:l,filterOption:function(c,W){return W.urlName.indexOf(c)!==-1||W.urlPath.indexOf(c)!==-1},children:function(c){var W=c.direction,J=c.filteredItems,U=c.onItemSelectAll,ge=c.onItemSelect,ye=c.selectedKeys,Ge=W==="left"?Ie:Se,$e={onSelectAll:function(_e,de){var be=de.map(function(Qe){var Ve=Qe.key;return Ve}),Ne=_e?(0,Pe.Z)(be,ye):(0,Pe.Z)(ye,be);U(Ne,_e)},onSelect:function(_e,de){var be=_e.key;ge(be,de)},selectedRowKeys:ye};return(0,r.jsx)(Ae.Z,{rowSelection:$e,columns:Ge,dataSource:J,rowKey:"key",size:"small",loading:ae,onRow:function(_e){var de=_e.key;return{onClick:function(){ge(de,!ye.includes(de))}}}})}})}))},We=Le,Te=["data","onChange","open"],Be=function(n){var o=n.data,re=n.onChange,p=n.open,V=ce()(n,Te),A=u.Z.useForm(),Y=i()(A,1),b=Y[0],H=(0,Ee.Z)($,{manual:!0,onSuccess:function(h){h.success&&re()}}),M=H.runAsync;return(0,m.useEffect)(function(){p&&o&&b.setFieldsValue(o)},[p]),(0,r.jsxs)(oe.Z,t()(t()({open:p,form:b,width:700,labelCol:{span:7},wrapperCol:{span:14},title:o?"\u4FEE\u6539\u4FE1\u606F":"\u65B0\u5EFA\u89D2\u8272",onFinish:function(){var D=g()(a()().mark(function h(E){var d,L;return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,M(t()(t()({},o),E));case 2:return d=l.sent,L=d.success,l.abrupt("return",L);case 5:case"end":return l.stop()}},h)}));return function(h){return D.apply(this,arguments)}}(),modalProps:{afterClose:function(){return b.resetFields()},wrapClassName:"modal_wrap_render"},initialValues:{state:1}},V),{},{children:[(0,r.jsx)(O.Z,{name:"groupName",required:!0,label:"URL\u7EC4\u540D"}),(0,r.jsx)(te.Z,{label:"\u6743\u9650\u72B6\u6001",required:!0,name:"state",disabled:!0,propCode:"status"}),(0,r.jsx)(ee.Z,{name:"groupDesc",label:"URL\u7EC4\u5907\u6CE8"})]}))},Ze=Be,Ke=function(){var n=(0,m.useRef)(),o=(0,m.useRef)(),re=(0,m.useState)(!1),p=i()(re,2),V=p[0],A=p[1],Y=(0,m.useState)(!1),b=i()(Y,2),H=b[0],M=b[1],D=(0,m.useState)(),h=i()(D,2),E=h[0],d=h[1],L=[{title:"URL\u7EC4\u540D",dataIndex:"groupName",align:"center"},{title:"\u7EC4\u8BF4\u660E",dataIndex:"groupDesc",align:"center"},{title:"\u72B6\u6001",dataIndex:"state",align:"center",render:function(l){return l===1?(0,r.jsx)(I.Z,{status:"success",text:"\u542F\u7528"}):(0,r.jsx)(I.Z,{text:"\u7981\u7528"})}},{key:"actions",title:"\u64CD\u4F5C",align:"center",fixed:"right",width:200,render:function(l,z){return(0,r.jsxs)(K.Z,{className:"action_bar",children:[(0,r.jsx)(C.Z,{type:"link",icon:(0,r.jsx)(_.Z,{}),auth:"sys:url:group:update",onClick:function(){d(t()({},z)),A(!0)},children:"\u4FEE\u6539"}),(0,r.jsx)(C.Z,{auth:"sys:url:group:connect:list",type:"link",icon:(0,r.jsx)(De.Z,{}),onClick:g()(a()().mark(function c(){return a()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:d(t()({},z)),M(!0);case 2:case"end":return J.stop()}},c)})),children:"\u5173\u8054URl"})]})}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{rowKey:"groupId",auth:"sys:url:group:list",scroll:{x:1200},tableRef:o,formRef:n,columns:L,pagination:!1,bordered:!0,showToolbar:!1,size:"small",table:{request:X}}),(0,r.jsx)(Ze,{open:V,onOpenChange:A,data:E,onChange:function(){var l;(l=o.current)===null||l===void 0||l.onReload()}}),(0,r.jsx)(We,{open:H,onOpenChange:M,record:E,onReload:function(){var l;(l=o.current)===null||l===void 0||l.onReload()}})]})},Fe=Ke,we=function(){return(0,r.jsx)(v._z,{children:(0,r.jsxs)(P.Z,{children:[(0,r.jsx)(Fe,{}),(0,r.jsx)("br",{}),(0,r.jsx)(fe,{})]})})},ze=we},15663:function(ie,R,e){e.d(R,{No:function(){return C},Tx:function(){return i},fQ:function(){return B}});var P=e(19708),v=function(_){return post("/service-obs/auth/FileController/fileUpload",_)},T=function(_){return download("/service-obs/auth/FileController/download",{method:"GET",params:_})},t=function(_){return download("/service-obs/auth/ZipFileController/downloadZip",{method:"POST",data:_,fileName:_.fileName})},B=function(_){return(0,P.v_)("/service-sysmgr/auth/PropertyController/pageValue",_)},i=function(_){return(0,P.v_)("/service-league/LeagueController/auth/pageLeague",_)},C=function(_){return(0,P.U2)("/service-league/LeagueController/auth/getPublicOrgChildren",_)}}}]);
