"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[702],{92100:function(z,f){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};f.Z=e},78177:function(z,f,e){var p=e(49919),s=e(50959),A=e(99565),u=e(26020),b=function(P,t){return s.createElement(u.Z,(0,p.Z)((0,p.Z)({},P),{},{ref:t,icon:A.Z}))};b.displayName="PlusOutlined",f.Z=s.forwardRef(b)},5842:function(z,f,e){var p=e(86378),s=e.n(p),A=e(58357),u=e.n(A),b=e(71977),l=e.n(b),P=e(28488),t=e.n(P),o=e(50959),y=e(15663),C=e(26161),O=e(53801),g=e(11527),w=["propCode","onChange"],x=function(h){var $=h.propCode,E=h.onChange,L=t()(h,w),U=(0,O.Z)(y.fQ,{manual:!0,cacheKey:"STATIC_".concat($),staleTime:3e5}),K=U.runAsync,F=function(_){E&&E(_.target.value)};return(0,g.jsx)(C.Z,s()(s()({request:l()(u()().mark(function j(){var _;return u()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,K({query:{propCode:$,state:1},pageNo:1,pageSize:999});case 2:return _=I.sent,I.abrupt("return",_.data.result.map(function(V){return{label:V.valueName,value:+V.valueCode}}));case 4:case"end":return I.stop()}},j)}))},L),{},{radioProps:s()({onChange:F},L==null?void 0:L.radioProps)}))};f.Z=x},26253:function(z,f,e){var p=e(86378),s=e.n(p),A=e(30577),u=e.n(A),b=e(28488),l=e.n(b),P=e(12632),t=e(50959),o=e(53690),y=e(11527),C=["auth","children"],O=function(w){var x=w.auth,Y=w.children,h=l()(w,C),$=(0,o.useModel)("@@initialState"),E=$.initialState,L=E,U=L.currentUser,K=(0,t.useState)(function(){var _;return x!==void 0?!!(U!=null&&U.authButton&&(_=U.authButton)!==null&&_!==void 0&&_.has(x)):!0}),F=u()(K,1),j=F[0];return(0,y.jsx)(y.Fragment,{children:j?(0,y.jsx)(P.ZP,s()(s()({},h),{},{children:Y})):(0,y.jsx)(y.Fragment,{})})};f.Z=O},4643:function(z,f,e){var p=e(58357),s=e.n(p),A=e(86378),u=e.n(A),b=e(71977),l=e.n(b),P=e(30577),t=e.n(P),o=e(28488),y=e.n(o),C=e(40039),O=e(50959),g=e(53690),w=e(93789),x=e(13655),Y=e(5061),h=e(11527),$=["auth","table"],E=w.Z.Text,L=function(K){var F,j=K.auth,_=K.table,N=y()(K,$),I=(0,g.useModel)("@@initialState"),V=I.initialState,he=V,J=he.currentUser,ie=(0,O.useState)(function(){var v;return j!==void 0?!!(J!=null&&J.authButton&&(v=J.authButton)!==null&&v!==void 0&&v.has(j)):!0}),Ee=t()(ie,1),be=Ee[0];return(0,h.jsx)(h.Fragment,{children:be?(0,h.jsx)(C.Z,u()(u()({tableLayout:"auto",size:"middle",rowKey:(_==null?void 0:_.rowKey)||N.rowKey,request:function(){var v=l()(s()().mark(function n(M){var X,k,De,te,de,ae,ce,me,T;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return X=M.pageSize,k=M.current,De=M.formValues,te=u()(u()({},De),_==null?void 0:_.requestParam),_!=null&&_.onSearchBefore&&(te=_.onSearchBefore(te)),c.next=5,_==null?void 0:_.request({pageNo:k,pageSize:X,query:te});case 5:if(de=c.sent,ae=de.success,ce=de.data,me=ce.result,T=ce.totalNum,!(_!=null&&_.onSearchAfter)){c.next=12;break}return c.abrupt("return",_==null?void 0:_.onSearchAfter({total:T,success:ae,data:me}));case 12:return c.abrupt("return",{total:T,success:ae,data:me});case 13:case"end":return c.stop()}},n)}));return function(n){return v.apply(this,arguments)}}()},N),{},{columns:(F=N.columns)===null||F===void 0?void 0:F.map(function(v){return v.ellipsis?u()(u()({},v),{},{render:function(M,X,k){return v.render&&v.render(M,X,k),(0,h.jsx)(E,{style:{width:v.width||200},ellipsis:{tooltip:{title:M}},children:v!=null&&v.render?v.render(M,X,k):M})}}):v})})):(0,h.jsx)(x.ZP,{renderEmpty:function(){return(0,h.jsxs)("div",{style:{textAlign:"center"},children:[(0,h.jsx)(Y.Z,{style:{fontSize:26,margin:"16px 0"}}),(0,h.jsx)("p",{children:"\u6682\u65E0\u6743\u9650"})]})},children:(0,h.jsx)(C.Z,u()(u()({tableLayout:"auto",size:"middle"},N),{},{formItems:[],request:l()(s()().mark(function v(){return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",{total:0,success:!1,data:[]});case 1:case"end":return M.stop()}},v)})),toolbarActionConfig:{showReload:!1,showColumnSetting:!1,showDensity:!1,showFullscreen:!1}}))})})};f.Z=L},65571:function(z,f,e){var p=e(86378),s=e.n(p),A=e(28488),u=e.n(A),b=e(50959),l=e(79804),P=e(11527),t=["children"],o=function(C){var O=C.children,g=u()(C,t);return(0,P.jsx)(l.Z,s()(s()({style:{height:"calc(100vh - 160px)",overflowY:"auto"}},g),{},{children:O}))};f.Z=o},54802:function(z,f,e){e.r(f),e.d(f,{default:function(){return me},updateMenuTreeData:function(){return ae}});var p=e(58357),s=e.n(p),A=e(71977),u=e.n(A),b=e(30577),l=e.n(b),P=e(86378),t=e.n(P),o=e(26253),y=e(4643),C=e(65571),O=e(35396),g=e(78177),w=e(88536),x=e(53801),Y=e(32499),h=e(7318),$=e(80650),E=e(50959),L=e(28488),U=e.n(L),K=e(5842),F=e(30020),j=e(54098),_=e(43735),N=e(88895),I=e(52163),V=e(80361),he=e(29675),J=e(73138),ie=e(19708),Ee=function(d){return(0,ie.U2)("/service-sysmgr/auth/tsmAppController/query",d)},be=function(d){return d.btnId?(0,ie.v_)("/service-sysmgr/auth/tsmAppController/update",d):(0,ie.v_)("/service-sysmgr/auth/tsmAppController/create",d)},v=function(d){return post("/service-sysmgr/auth/tsmAppController/del",d)},n=e(11527),M=["proRef","tableRef","onSuccess"],X=function(d){var c=d.proRef,_e=d.tableRef,R=d.onSuccess,ve=U()(d,M),se=(0,E.useState)(!1),q=l()(se,2),G=q[0],ee=q[1],oe=_.Z.useForm(),pe=l()(oe,1),Z=pe[0],fe=(0,N.Z)(c,{onShow:function(){return ee(!G)}}),i=fe.parentData,H=(0,x.Z)(be,{manual:!0,onSuccess:function(S){S.success&&R((i==null?void 0:i.parentId)||"-1")}}),ne=H.runAsync;return(0,E.useEffect)(function(){i&&Z.setFieldsValue(t()({},i))},[i]),(0,n.jsx)(I.Z,t()(t()({open:G,form:Z,width:700,title:i!=null&&i.btnId?"\u4FEE\u6539\u4FE1\u606F":"\u65B0\u589E\u6309\u94AE",onFinish:function(){var B=u()(s()().mark(function S(ue){var re,D;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne(t()(t()({},i),ue));case 2:return re=r.sent,D=re.success,r.abrupt("return",D);case 5:case"end":return r.stop()}},S)}));return function(S){return B.apply(this,arguments)}}(),modalProps:{afterClose:function(){return Z.resetFields()},wrapClassName:"modal_wrap_render"},initialValues:{state:1},layout:"vertical",onOpenChange:ee},ve),{},{children:(0,n.jsxs)(F.Z,{children:[(0,n.jsx)(j.Z,{span:10,children:(0,n.jsx)(V.Z,{name:"name",required:!0,label:"\u6309\u94AE\u540D\u79F0"})}),(0,n.jsx)(j.Z,{span:10,offset:2,children:(0,n.jsx)(V.Z,{name:"code",label:"\u6309\u94AE\u6807\u8BC6",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6309\u94AE\u6807\u8BC6"},{message:"\u6309\u94AE\u6807\u8BC6\u683C\u5F0F\u9519\u8BEF",pattern:RegExp(/:/)}]})}),(0,n.jsx)(j.Z,{span:10,children:(0,n.jsx)(he.Z,{name:"sort",required:!0,label:"\u663E\u793A\u6392\u5E8F",min:0,numberProps:{precision:0}})}),(0,n.jsx)(j.Z,{span:10,offset:2,children:(0,n.jsx)(K.Z,{label:"\u6309\u94AE\u72B6\u6001",required:!0,name:"state",propCode:"status"})}),(0,n.jsx)(j.Z,{span:24,children:(0,n.jsx)(J.Z,{name:"describe",label:"\u6309\u94AE\u63CF\u8FF0"})})]})}))},k=X,De=["proRef","tableRef","onSuccess"],te=function(d){var c=d.proRef,_e=d.tableRef,R=d.onSuccess,ve=U()(d,De),se=(0,E.useState)(!1),q=l()(se,2),G=q[0],ee=q[1],oe=_.Z.useForm(),pe=l()(oe,1),Z=pe[0],fe=(0,N.Z)(c,{onShow:function(){return ee(!G)}}),i=fe.parentData,H=(0,x.Z)(be,{manual:!0,onSuccess:function(S){S.success&&R(i==null?void 0:i.parentId)}}),ne=H.runAsync;return(0,E.useEffect)(function(){i&&Z.setFieldsValue(t()({},i))},[i]),(0,n.jsxs)(I.Z,t()(t()({open:G,form:Z,width:700,onOpenChange:ee,title:i!=null&&i.btnId?"\u4FEE\u6539\u4FE1\u606F":"\u65B0\u5EFA\u83DC\u5355",onFinish:function(){var B=u()(s()().mark(function S(ue){var re,D;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne(t()(t()(t()({},i),ue),{},{type:1,code:""}));case 2:return re=r.sent,D=re.success,r.abrupt("return",D);case 5:case"end":return r.stop()}},S)}));return function(S){return B.apply(this,arguments)}}(),labelCol:{span:5},wrapperCol:{span:17},modalProps:{afterClose:function(){return Z.resetFields()},wrapClassName:"modal_wrap_render"},initialValues:{state:1}},ve),{},{children:[(0,n.jsx)(V.Z,{name:"name",required:!0,label:"\u83DC\u5355\u540D\u79F0"}),(0,n.jsx)(he.Z,{name:"sort",required:!0,label:"\u663E\u793A\u6392\u5E8F",min:0,numberProps:{precision:0}}),(0,n.jsx)(K.Z,{label:"\u83DC\u5355\u72B6\u6001",required:!0,name:"state",propCode:"status"}),(0,n.jsx)(J.Z,{name:"describe",label:"\u83DC\u5355\u63CF\u8FF0"})]}))},de=te,ae=function T(d,c,_e){return d.map(function(R){return R.btnId===c?t()(t()({},R),{},{children:_e}):R.children?t()(t()({},R),{},{children:T(R.children,c,_e)}):R})},ce=function(){var d=(0,E.useRef)(),c=(0,E.useRef)(),_e=(0,E.useState)(!1),R=l()(_e,2),ve=R[0],se=R[1],q=(0,E.useState)([]),G=l()(q,2),ee=G[0],oe=G[1],pe=(0,E.useState)([]),Z=l()(pe,2),fe=Z[0],i=Z[1],H=(0,E.useRef)(),ne=(0,E.useRef)(),B=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"name",render:function(a,r){return r.type===1?(0,n.jsx)("span",{children:r.name}):(0,n.jsx)(Y.Z,{color:"cyan",children:r.name})}},{title:"\u5E8F\u53F7",align:"center",dataIndex:"sort"},{title:"\u6309\u94AE\u7F16\u7801",align:"center",dataIndex:"code",render:function(a){if(a)return(0,n.jsx)(Y.Z,{color:"default",children:a})}},{title:"\u63CF\u8FF0",align:"center",dataIndex:"describe"},{title:"\u521B\u5EFA\u65F6\u95F4",align:"center",dataIndex:"createTime"},{title:"\u72B6\u6001",align:"center",dataIndex:"state",render:function(a){return a===1?(0,n.jsx)(h.Z,{status:"success",text:"\u542F\u7528"}):(0,n.jsx)(h.Z,{text:"\u7981\u7528"})}},{key:"actions",title:"\u64CD\u4F5C",align:"center",fixed:"right",width:180,render:function(a,r){return(0,n.jsxs)($.Z,{className:"action_bar",children:[r.type===1?(0,n.jsx)(o.Z,{type:"link",onClick:function(){var m;(m=H.current)===null||m===void 0||m.onShow({parentId:r.btnId,type:2})},children:"\u65B0\u589E\u6309\u94AE"}):(0,n.jsx)(o.Z,{type:"link",style:{color:"orange"},onClick:function(){var m;(m=H.current)===null||m===void 0||m.onShow({parentId:r.parentId,sort:r.sort,describe:r.describe,name:"".concat(r.name," - \u590D\u5236"),code:void 0,type:2})},children:"\u590D\u5236"}),(0,n.jsx)(o.Z,{type:"link",icon:(0,n.jsx)(O.Z,{}),onClick:function(){if(r.type===1){var m;(m=ne.current)===null||m===void 0||m.onShow(t()({},r))}else{var W;(W=H.current)===null||W===void 0||W.onShow(t()({},r))}},children:"\u4FEE\u6539"})]})}}],S=(0,x.Z)(Ee,{manual:!0,onSuccess:function(a,r){var Q=a.data;a.success&&(Q.forEach(function(m){m.leaf||(m.children=[]),m.title=m.name,m.key=m.code}),oe(function(m){var W=ae(m,r[0].id,Q);return W}))}}),ue=S.run,re=S.loading;return(0,n.jsx)(w._z,{children:(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(y.Z,{rowKey:"btnId",toolbarLeft:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.Z,{type:"primary",auth:"sys:static:property:create",onClick:function(){var a;(a=ne.current)===null||a===void 0||a.onShow({})},icon:(0,n.jsx)(g.Z,{}),children:"\u65B0\u589E"})}),loading:re||ve,scroll:{x:1200},tableRef:c,formRef:d,columns:B,pagination:!1,dataSource:ee,request:u()(s()().mark(function D(){var a,r,Q;return s()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return se(!0),W.next=3,Ee({});case 3:return a=W.sent,r=a.data,Q=a.success,Q&&(r.forEach(function(le){le.leaf||(le.children=[]),le.title=le.name,le.key=le.code}),i([]),oe(r),a.data=r),se(!1),W.abrupt("return",a);case 8:case"end":return W.stop()}},D)})),expandedRowKeys:fe,expandable:{onExpand:function(a,r){a&&r.children.length===0&&ue({id:r.btnId})},onExpandedRowsChange:function(a){i(a)}}}),(0,n.jsx)(k,{proRef:H,tableRef:c,onSuccess:function(a){if(a==="-1"){var r;(r=c.current)===null||r===void 0||r.onSearch()}else ue({id:a})}}),(0,n.jsx)(de,{proRef:ne,tableRef:c,onSuccess:function(){var a;(a=c.current)===null||a===void 0||a.onSearch()}})]})})},me=ce},15663:function(z,f,e){e.d(f,{No:function(){return P},Tx:function(){return l},fQ:function(){return b}});var p=e(19708),s=function(o){return post("/service-obs/auth/FileController/fileUpload",o)},A=function(o){return download("/service-obs/auth/FileController/download",{method:"GET",params:o})},u=function(o){return download("/service-obs/auth/ZipFileController/downloadZip",{method:"POST",data:o,fileName:o.fileName})},b=function(o){return(0,p.v_)("/service-sysmgr/auth/PropertyController/pageValue",o)},l=function(o){return(0,p.v_)("/service-league/LeagueController/auth/pageLeague",o)},P=function(o){return(0,p.U2)("/service-league/LeagueController/auth/getPublicOrgChildren",o)}},88895:function(z,f,e){e.d(f,{Z:function(){return A}});var p=e(91664),s=e(50959);function A(u,b){var l=(0,s.useRef)(),P=(0,s.useRef)(),t=b.onShow,o=b.onFormart,y=b.onHide,C=(0,s.useCallback)(function(O){P.current=O},[]);return(0,s.useImperativeHandle)(u,function(){return{onShow:function(g){l.current=(0,p.Hl)(g),t&&t(l.current)},onHide:function(g){y&&y((0,p.Hl)(g))},getChildData:function(){return P.current}}}),{parentData:o?o(l.current):l.current,setParentData:C}}}}]);
