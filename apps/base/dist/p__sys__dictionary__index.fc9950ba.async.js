"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[307],{92100:function(k,f){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};f.Z=e},78177:function(k,f,e){var E=e(49919),s=e(50959),j=e(99565),l=e(26020),a=function(_,c){return s.createElement(l.Z,(0,E.Z)((0,E.Z)({},_),{},{ref:c,icon:j.Z}))};a.displayName="PlusOutlined",f.Z=s.forwardRef(a)},5842:function(k,f,e){var E=e(86378),s=e.n(E),j=e(58357),l=e.n(j),a=e(71977),g=e.n(a),_=e(28488),c=e.n(_),u=e(50959),m=e(15663),P=e(26161),z=e(53801),Q=e(11527),w=["propCode","onChange"],G=function(v){var V=v.propCode,J=v.onChange,I=c()(v,w),S=(0,z.Z)(m.fQ,{manual:!0,cacheKey:"STATIC_".concat(V),staleTime:3e5}),B=S.runAsync,Z=function(t){J&&J(t.target.value)};return(0,Q.jsx)(P.Z,s()(s()({request:g()(l()().mark(function U(){var t;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,B({query:{propCode:V,state:1},pageNo:1,pageSize:999});case 2:return t=r.sent,r.abrupt("return",t.data.result.map(function(te){return{label:te.valueName,value:+te.valueCode}}));case 4:case"end":return r.stop()}},U)}))},I),{},{radioProps:s()({onChange:Z},I==null?void 0:I.radioProps)}))};f.Z=G},26253:function(k,f,e){var E=e(86378),s=e.n(E),j=e(30577),l=e.n(j),a=e(28488),g=e.n(a),_=e(12632),c=e(50959),u=e(53690),m=e(11527),P=["auth","children"],z=function(w){var G=w.auth,N=w.children,v=g()(w,P),V=(0,u.useModel)("@@initialState"),J=V.initialState,I=J,S=I.currentUser,B=(0,c.useState)(function(){var t;return G!==void 0?!!(S!=null&&S.authButton&&(t=S.authButton)!==null&&t!==void 0&&t.has(G)):!0}),Z=l()(B,1),U=Z[0];return(0,m.jsx)(m.Fragment,{children:U?(0,m.jsx)(_.ZP,s()(s()({},v),{},{children:N})):(0,m.jsx)(m.Fragment,{})})};f.Z=z},4643:function(k,f,e){var E=e(58357),s=e.n(E),j=e(86378),l=e.n(j),a=e(71977),g=e.n(a),_=e(30577),c=e.n(_),u=e(28488),m=e.n(u),P=e(40039),z=e(50959),Q=e(53690),w=e(93789),G=e(13655),N=e(5061),v=e(11527),V=["auth","table"],J=w.Z.Text,I=function(B){var Z,U=B.auth,t=B.table,Y=m()(B,V),r=(0,Q.useModel)("@@initialState"),te=r.initialState,pe=te,ne=pe.currentUser,de=(0,z.useState)(function(){var i;return U!==void 0?!!(ne!=null&&ne.authButton&&(i=ne.authButton)!==null&&i!==void 0&&i.has(U)):!0}),ce=c()(de,1),me=ce[0];return(0,v.jsx)(v.Fragment,{children:me?(0,v.jsx)(P.Z,l()(l()({tableLayout:"auto",size:"middle",rowKey:(t==null?void 0:t.rowKey)||Y.rowKey,request:function(){var i=g()(s()().mark(function ae(D){var q,ee,ve,oe,_e,se,H,ue,le;return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return q=D.pageSize,ee=D.current,ve=D.formValues,oe=l()(l()({},ve),t==null?void 0:t.requestParam),t!=null&&t.onSearchBefore&&(oe=t.onSearchBefore(oe)),F.next=5,t==null?void 0:t.request({pageNo:ee,pageSize:q,query:oe});case 5:if(_e=F.sent,se=_e.success,H=_e.data,ue=H.result,le=H.totalNum,!(t!=null&&t.onSearchAfter)){F.next=12;break}return F.abrupt("return",t==null?void 0:t.onSearchAfter({total:le,success:se,data:ue}));case 12:return F.abrupt("return",{total:le,success:se,data:ue});case 13:case"end":return F.stop()}},ae)}));return function(ae){return i.apply(this,arguments)}}()},Y),{},{columns:(Z=Y.columns)===null||Z===void 0?void 0:Z.map(function(i){return i.ellipsis?l()(l()({},i),{},{render:function(D,q,ee){return i.render&&i.render(D,q,ee),(0,v.jsx)(J,{style:{width:i.width||200},ellipsis:{tooltip:{title:D}},children:i!=null&&i.render?i.render(D,q,ee):D})}}):i})})):(0,v.jsx)(G.ZP,{renderEmpty:function(){return(0,v.jsxs)("div",{style:{textAlign:"center"},children:[(0,v.jsx)(N.Z,{style:{fontSize:26,margin:"16px 0"}}),(0,v.jsx)("p",{children:"\u6682\u65E0\u6743\u9650"})]})},children:(0,v.jsx)(P.Z,l()(l()({tableLayout:"auto",size:"middle"},Y),{},{formItems:[],request:g()(s()().mark(function i(){return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",{total:0,success:!1,data:[]});case 1:case"end":return D.stop()}},i)})),toolbarActionConfig:{showReload:!1,showColumnSetting:!1,showDensity:!1,showFullscreen:!1}}))})})};f.Z=I},65571:function(k,f,e){var E=e(86378),s=e.n(E),j=e(28488),l=e.n(j),a=e(50959),g=e(79804),_=e(11527),c=["children"],u=function(P){var z=P.children,Q=l()(P,c);return(0,_.jsx)(g.Z,s()(s()({style:{height:"calc(100vh - 160px)",overflowY:"auto"}},Q),{},{children:z}))};f.Z=u},567:function(k,f,e){e.r(f),e.d(f,{DicContext:function(){return ie},default:function(){return Ae}});var E=e(30577),s=e.n(E),j=e(30020),l=e(54098),a=e(50959),g=e(86378),_=e.n(g),c=e(32499),u=e(80650),m=e(80361),P=e(19708),z=function(n){return(0,P.v_)("/service-sysmgr/auth/PropertyController/pageProperty",n)},Q=function(n){return n.propId?(0,P.v_)("/service-sysmgr/auth/PropertyController/updateProperty",n):(0,P.v_)("/service-sysmgr/auth/PropertyController/createProperty",n)},w=function(n){return n.valueId?(0,P.v_)("/service-sysmgr/auth/PropertyController/updateValue",n):(0,P.v_)("/service-sysmgr/auth/PropertyController/createValue",n)},G=e(58357),N=e.n(G),v=e(71977),V=e.n(v),J=e(28488),I=e.n(J),S=e(5842),B=e(53801),Z=e(6445),U=e(43735),t=e(52163),Y=e(73138),r=e(11527),te=["data","onChange","open"],pe=function(n){var d=n.data,O=n.onChange,b=n.open,y=I()(n,te),R=U.Z.useForm(),M=s()(R,1),x=M[0],X=(0,B.Z)(Q,{manual:!0,onSuccess:function(o){o.success&&(O(),Z.ZP.success("\u64CD\u4F5C\u6210\u529F"))}}),L=X.runAsync;return(0,a.useEffect)(function(){b&&d&&x.setFieldsValue(d)},[b]),(0,r.jsxs)(t.Z,_()(_()({isDraggable:!0,isEnterSubmit:!1,open:b,form:x,labelCol:{span:5},wrapperCol:{span:18},title:"".concat(d?"\u4FEE\u6539":"\u65B0\u589E","\u9759\u6001\u503C"),onFinish:function(){var K=V()(N()().mark(function o(T){var p,h;return N()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,L(_()(_()({},d),T));case 2:return p=W.sent,h=p.success,W.abrupt("return",h);case 5:case"end":return W.stop()}},o)}));return function(o){return K.apply(this,arguments)}}(),modalProps:{afterClose:function(){return x.resetFields()},wrapClassName:"modal_wrap_render"},initialValues:{state:1}},y),{},{children:[(0,r.jsx)(m.Z,{name:"propName",required:!0,label:"\u5C5E\u6027\u540D\u79F0",tooltip:"\u8DEF\u7531\u540D\u79F0 - \u5C5E\u6027\u540D\u79F0",placeholder:"\u4F8B\uFF1A\u7528\u6237\u7BA1\u7406-\u7528\u6237\u6765\u6E90",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5C5E\u6027\u540D\u79F0"},{message:"\u5C5E\u6027\u540D\u79F0\u683C\u5F0F\u9519\u8BEF",pattern:RegExp(/-/)}]}),(0,r.jsx)(m.Z,{name:"propCode",required:!0,label:"\u5C5E\u6027\u7F16\u7801"}),(0,r.jsx)(S.Z,{label:"\u72B6\u6001",name:"state",propCode:"status"}),(0,r.jsx)(Y.Z,{label:"\u5907\u6CE8",disabledWhiteSpace:!1,name:"propDesc"})]}))},ne=pe,de=e(35396),ce=e(78177),me=e(46753),i=e(38209),ae=e.n(i),D=e(55297),q=e(80096),ee=e(49937),ve=e(70510);function oe(A,n){var d;ve.Z&&((0,ee.mf)(A)||console.error("useThrottleFn expected parameter is a function, got ".concat(typeof A)));var O=(0,D.Z)(A),b=(d=n==null?void 0:n.wait)!==null&&d!==void 0?d:1e3,y=(0,a.useMemo)(function(){return ae()(function(){for(var R=[],M=0;M<arguments.length;M++)R[M]=arguments[M];return O.current.apply(O,(0,me.ev)([],(0,me.CR)(R),!1))},b,n)},[]);return(0,q.Z)(function(){y.cancel()}),{run:y,cancel:y.cancel,flush:y.flush}}var _e=oe,se=e(4643),H=e(26253),ue=function(){var n=(0,a.useRef)(),d=(0,a.useRef)(),O=(0,a.useState)(!1),b=s()(O,2),y=b[0],R=b[1],M=(0,a.useState)(),x=s()(M,2),X=x[0],L=x[1],K=(0,a.useContext)(ie),o=K.setRecord,T=K.record,p=_e(function($){return o(_()({},$))},{wait:500}),h=p.run,re=[(0,r.jsx)(m.Z,{name:"propName",label:"\u5C5E\u6027\u540D\u79F0"},"0"),(0,r.jsx)(m.Z,{name:"propCode",label:"\u5C5E\u6027\u7F16\u7801"},"1")],W=[{title:"\u5C5E\u6027\u540D\u79F0",dataIndex:"propName",align:"center"},{title:"\u5C5E\u6027\u7F16\u7801",dataIndex:"propCode",align:"center",render:function(C){return(0,r.jsx)(c.Z,{color:"processing",children:(0,r.jsx)("a",{children:C})})}},{title:"\u5907\u6CE8",dataIndex:"propDesc",align:"center",width:150},{key:"actions",title:"\u64CD\u4F5C",align:"center",fixed:"right",width:60,render:function(C,fe){return(0,r.jsx)(u.Z,{className:"action_bar",children:(0,r.jsx)(H.Z,{type:"link",icon:(0,r.jsx)(de.Z,{}),auth:"sys:static:property:update",onClick:function(){L(_()({},fe)),R(!0)},children:"\u4FEE\u6539"})})}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(se.Z,{rowKey:"propId",auth:"sys:static:property:list",tableRef:d,scroll:{x:800},toolbarLeft:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(H.Z,{type:"primary",auth:"sys:static:property:create",onClick:function(){L(void 0),R(!0)},icon:(0,r.jsx)(ce.Z,{}),children:"\u65B0\u589E"})}),toolbarActionConfig:{showColumnSetting:!1,showDensity:!1,showFullscreen:!1,showReload:!1},queryFormProps:{isSpace:!0,submitter:{onReset:function(){o(void 0)},onSubmit:function(){o(void 0)}}},onRow:function(C){return{style:{cursor:"pointer",background:(T==null?void 0:T.propId)===C.propId?"#00000010":"unset"},onClick:function(){return h(_()({},C))}}},formItems:re,formRef:n,columns:W,pagination:{pageSize:6,showSizeChanger:!1},table:{request:z}}),(0,r.jsx)(ne,{open:y,onOpenChange:R,data:X,onChange:function(){var C;(C=d.current)===null||C===void 0||C.onReload()}})]})},le=ue,he=e(7318),F=e(29675),Ee=["data","onChange","open"],be=function(n){var d=n.data,O=n.onChange,b=n.open,y=I()(n,Ee),R=U.Z.useForm(),M=s()(R,1),x=M[0],X=(0,a.useContext)(ie),L=X.record,K=(0,B.Z)(w,{manual:!0,onSuccess:function(p){p.success&&(O(),Z.ZP.success("\u64CD\u4F5C\u6210\u529F"))}}),o=K.runAsync;return(0,a.useEffect)(function(){b&&d&&x.setFieldsValue(d)},[b]),(0,r.jsxs)(t.Z,_()(_()({isDraggable:!0,isEnterSubmit:!1,open:b,form:x,labelCol:{span:5},wrapperCol:{span:18},title:"".concat(d?"\u4FEE\u6539":"\u65B0\u589E","\u5C5E\u6027\u503C"),onFinish:function(){var T=V()(N()().mark(function p(h){var re,W;return N()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,o(_()(_()(_()({},L),d),h));case 2:return re=C.sent,W=re.success,C.abrupt("return",W);case 5:case"end":return C.stop()}},p)}));return function(p){return T.apply(this,arguments)}}(),modalProps:{afterClose:function(){return x.resetFields()},wrapClassName:"modal_wrap_render"},initialValues:{state:1}},y),{},{children:[(0,r.jsx)(m.Z,{name:"valueName",required:!0,label:"\u5C5E\u6027\u503C\u540D\u79F0"}),(0,r.jsx)(m.Z,{name:"valueCode",required:!0,label:"\u5C5E\u6027\u503C"}),(0,r.jsx)(F.Z,{name:"sortId",required:!0,label:"\u663E\u793A\u6392\u5E8F",min:0,numberProps:{precision:0}}),(0,r.jsx)(S.Z,{label:"\u72B6\u6001",name:"state",propCode:"status"}),(0,r.jsx)(Y.Z,{label:"\u5C5E\u6027\u503C\u63CF\u8FF0",name:"valueDesc"})]}))},Ce=be,Pe=e(79804),De=e(15663),ye=function(){var n=(0,a.useRef)(),d=(0,a.useState)(!1),O=s()(d,2),b=O[0],y=O[1],R=(0,a.useState)(),M=s()(R,2),x=M[0],X=M[1],L=(0,a.useRef)(),K=(0,a.useContext)(ie),o=K.record,T=[{title:"\u6392\u5E8F",dataIndex:"sortId",align:"center"},{title:"\u5C5E\u6027\u540D\u79F0",dataIndex:"valueName",align:"center"},{title:"\u5C5E\u6027\u503C",dataIndex:"valueCode",align:"center"},{title:"\u5C5E\u6027\u63CF\u8FF0",dataIndex:"valueDesc",align:"center"},{title:"\u72B6\u6001",dataIndex:"state",align:"center",render:function(h){return h===1?(0,r.jsx)(he.Z,{status:"success",text:"\u542F\u7528"}):(0,r.jsx)(he.Z,{text:"\u7981\u7528"})}},{key:"actions",title:"\u64CD\u4F5C",fixed:"right",align:"center",render:function(h,re){return(0,r.jsx)(u.Z,{className:"action_bar",children:(0,r.jsx)(H.Z,{auth:"sys:static:value:update",type:"link",icon:(0,r.jsx)(de.Z,{}),onClick:function(){X(_()({},re)),y(!0)},children:"\u4FEE\u6539"})})}}];return(0,a.useEffect)(function(){if(o!=null&&o.propCode){var p;(p=L.current)===null||p===void 0||p.onSearch()}else{var h;(h=L.current)===null||h===void 0||h.onReset()}},[o]),(0,r.jsxs)(Pe.Z,{title:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)("strong",{children:o==null?void 0:o.propName}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:o==null?void 0:o.propCode})]}),children:[(0,r.jsx)(se.Z,{rowKey:"valueId",tableRef:L,formRef:n,size:"small",auth:"sys:static:value:list",columns:T,pagination:{pageSize:10,showSizeChanger:!1,showQuickJumper:!1},table:{request:De.fQ,requestParam:{propCode:o==null?void 0:o.propCode}},autoRequest:!1,scroll:{x:600},toolbarRight:(o==null?void 0:o.propId)&&(0,r.jsx)(H.Z,{auth:"sys:static:value:create",type:"primary",onClick:function(){X(void 0),y(!0)},icon:(0,r.jsx)(ce.Z,{}),children:"\u65B0\u589E"}),queryFormProps:{submitter:{showReset:!1}},toolbarActionConfig:{showColumnSetting:!1,showDensity:!1,showFullscreen:!1,showReload:!1}}),(0,r.jsx)(Ce,{open:b,onOpenChange:y,data:x,onChange:function(){var h;(h=L.current)===null||h===void 0||h.onReload()}})]})},ge=ye,Oe=e(88536),Me=e(65571),ie=(0,a.createContext)({record:void 0,setRecord:function(){}}),je=function(){var n=(0,a.useState)(),d=s()(n,2),O=d[0],b=d[1];return(0,r.jsx)(Oe._z,{children:(0,r.jsx)(ie.Provider,{value:{record:O,setRecord:b},children:(0,r.jsx)(Me.Z,{children:(0,r.jsxs)(j.Z,{gutter:[12,12],children:[(0,r.jsx)(l.Z,{span:12,children:(0,r.jsx)(le,{})}),(0,r.jsx)(l.Z,{span:12,children:(0,r.jsx)(ge,{})})]})})})})},Ae=je},15663:function(k,f,e){e.d(f,{No:function(){return _},Tx:function(){return g},fQ:function(){return a}});var E=e(19708),s=function(u){return post("/service-obs/auth/FileController/fileUpload",u)},j=function(u){return download("/service-obs/auth/FileController/download",{method:"GET",params:u})},l=function(u){return download("/service-obs/auth/ZipFileController/downloadZip",{method:"POST",data:u,fileName:u.fileName})},a=function(u){return(0,E.v_)("/service-sysmgr/auth/PropertyController/pageValue",u)},g=function(u){return(0,E.v_)("/service-league/LeagueController/auth/pageLeague",u)},_=function(u){return(0,E.U2)("/service-league/LeagueController/auth/getPublicOrgChildren",u)}}}]);
